#!/usr/bin/env python3
import numpy as np
import rospy
from std_msgs.msg import String

# ---------------------------------------------------
#   Parameters
# ---------------------------------------------------

# Masks - Color ranges
# TODO Verificar valores
# Red color

lower_red = np.array([0, 0, 90])
upper_red = np.array([40, 40, 256])

# Green color
lower_green = np.array([0, 90, 0])
upper_green = np.array([40, 256, 40])

# Blue color
lower_blue = np.array([90, 0, 0])
upper_blue = np.array([256, 40, 40])


class Driver:
    def __init__(self):
        # Get team, hunter and prey
        self.allplayers = {'red': rospy.get_param('/red_players'),
                           'green': rospy.get_param('/green_players'),
                           'blue': rospy.get_param('/blue_players')}
        self.player = rospy.get_name().strip('/')
        if self.player in self.allplayers['red']:
            self.team = 'red'
            self.hunter = 'blue'
            self.prey = 'green'
        elif self.player in self.allplayers['green']:
            self.team = 'green'
            self.hunter = 'red'
            self.prey = 'blue'
        elif self.player in self.allplayers['blue']:
            self.team = 'blue'
            self.hunter = 'green'
            self.prey = 'red'
        else:
            self.team = 'Alone'
            self.hunter = 'Noone'
            self.prey = 'Noone'

    def team_identification_callback(self):
        return self.player, self.team, self.hunter, self.prey


def main():
    topic = 'chatter'
    rospy.init_node('p_g3_driver', anonymous=False)
    # Testing
    rospy.loginfo("I'm " + Driver().player + ", from team " + Driver().team +
                  "\nI want to catch " + Driver().prey + " but I fear " + Driver().hunter)
    rospy.spin()


if __name__ == '__main__':
    try:
        main()
    except rospy.ROSInterruptException:
        pass
